#《代码整洁之道》
> 勒布朗法则：稍后等于永不。
### 第一章  整洁代码

##### 1、糟糕代码的原因
> 在我自己来看，写出糟糕代码可能是以下几个原因：
> - 编程经验不够，没有意识到代码整洁的重要性，处于功能实现即可完成任务的阶段；
> - 有“整洁代码、优化代码”的意识，在具体编程时，由于项目进度和时间的原因，没有时间去思考如何优化，如何使代码整洁。最后只能草草了事，完成任务即可。想着可以后续继续优化，但只是停留在这想法上了。
> - 力不从心，有优化代码的想法，但是不知道该如何进行优化、整洁。或者是不知道如何深层次的进行优化。

##### 2、整洁代码

> 在Bjarne Stroustrup认为，整洁代码：
>
> ![](https://note.youdao.com/yws/api/personal/file/0F4900F572324F36B3E61138387133ED?method=download&shareKey=69f16bfb706cc3cd9216f7159243f66a)

> 在Grady Booch看来，整洁代码为：
>
> ![整洁代码2](https://note.youdao.com/yws/api/personal/file/0A4E97760DBD4B3E96C1BBAC50EF0055?method=download&shareKey=e94b38a7af0d5bf9370a847afb8f5c72)

> Dave Thomas认为：
>
> ![整洁代码3](https://note.youdao.com/yws/api/personal/file/6957B2074516409CB8E307FFB504E865?method=download&shareKey=84b30ad4c8ba71ced1453e9cbae2daad)

> Michael Feathers认为：
>
> ![整洁代码4](https://note.youdao.com/yws/api/personal/file/E2BD041522914D82A5DDE3A4DD6EB206?method=download&shareKey=5aecf43ba139e90014155e4674b73740)

> Ron Jeffries认为：
>
> ![整洁代码5](https://note.youdao.com/yws/api/personal/file/6EACC9AB08134A558A1B5598B8633E08?method=download&shareKey=2b7a2890211f06d7227b15495eda8495)

### 第二章  有意义的命名

##### 1、文件命名

> 文件一般包括类、配置文件和资源文件。文件的命名一般是名次或者名次短语。

##### 2、方法命名

> 这种类型的命名一般是动词或者动词短语。方法一般是为解决某个问题或者处理某种逻辑而存在的，在命名上最好是体现出这个方法的作用

##### 3、属性命名

> 普通属性可以使用驼峰式；静态变量属性最好使用A_B_C式的。命名使用英语单词，避免中英混杂，名字最好可以体现这个属性所表达的意义。

### 第三章 函数

> 1. 函数应当尽量的短；
> 2. 函数的缩进层级最多应当为2级，注意在if、else、while、for等语句块里面应当只是一个函数调用，不应再嵌套；
> 3. 函数应当只做好一件事。（看一个函数是否还可以拆分）
> 4. 函数名称上面也叙述过了，不要担心函数名称长度。长而具有描述性的名称是可以被接受的，命名的风格要保持一致；
> 5. 函数的参数应当尽可能的少，最多为三个；

> 函数的书写功底也并非一日之功，想写出高效简洁就可以写出来的，是需要有一定的代码积累，有一定的编程架构思想，懂得功能分解才能达到的境界，不然也只是部分优化或者不完全优化，达不到一个高标准。

### 第四章 注释

> 以前在自己看来，多写点注视应该总是没错的，对自己看代码或者后面的开发者看总是有益无害的。但是看了本书之后，纠结于以后到底要不要写注释，且现在来看自己以前写的都是烂注释，书中对于注释要求甚是严格：

##### 1、好注释：

> - 提供法律信息
> - 提供代码的有效信息
> - 说明意图，解释代码的意图，或者是输出什么结果
> - 可以阐释代码的结果，以进行比对，但是务必要保证注释的正确性，避免风险
> - 有警示作用的代码，提醒读者或者此处需要注意什么问题
> - 利用TODO或者FIX注释，标识将来需要完成或者完善的功能

##### 2、坏注释

> ![坏注释](https://note.youdao.com/yws/api/personal/file/F2C2AA03773245F7AB0EE5DC6BF7C932?method=download&shareKey=2cf7854300efc43250e71ff7c695447b)

### 第五章 代码格式

### 第六章 对象和数据结构

##### 1、影藏对象，暴露操作

> 过程式代码难以添加数据结构，因为必须修改所有的函数；面向对象代码难以添加新函数，因为需要修改所有的类。

### 第七章 错误处理

>  1、避免使用返回错误码，利用异常处理错误
>
>  2、使用catch finally去捕获异常，使用不可控异常，在方法上抛出异常，会违背接口设计的开放必和原则，在它的继承和使用方法上都得抛出该异常，在底层如果修改了代码，可能会影响到其他的方法调用
>
>  3、最好在代码中给出异常可能发生的环境

### 第八章 边界

> 没看太懂

### 第九章 单元测试

##### 1、重视测试

> 在项目团队中，如果不是有要求，我想应该是没有几分人会去主动写测试类的。所以首先有这个意识很重要。项目中也有测试团队这也许导致了开发有所依赖，所以不去编写测试代码或者是随意编写测试代码。但实际上编写简洁、整洁的测试代码是对自己的代码的检验，也是一种责任的体现，团队中每个环节、每个人都能超标保证自己的任务的质量，不去依赖下一个环节，项目的质量就会提高。

##### 2、测试的F.I.R.S.T规则

> - **快速(Fast):** 测试代码的逻辑不应太过复杂，能够快速运行，如果测试代码运行过慢，可能就不会频繁进行测试了；
> - **独立(Independent): **每个测试方法测试类应当独立，彼此之间不能有依赖，某个测试不能成为下一个测试的依赖条件，这会导致测试很复杂；
> - **可重复(Repeatable):** 测试不应该依赖环境，在任何环境中都应当测试通过，当测试不能在任意环境中重复测试时，说明代码中存在导致其失败的接口；
> - **自足验证(Self-Validating):** 么个测试方法运行都应当有true或false输出，测试者不应当通过查询日志或主观判断进行验证。
> - **及时(Timely):** 测试应及时编写，单元测试应当在使其通过的生产代码之前编写。否则生产代码编写好之后可能会由于生产代码的逻辑复杂就不会去编写测试代码了。

### 第十章 类

### 第十一章 系统

> “一开始就做对系统”是不可能的，我们应当只去实现用户当前的需求，然后对系统重构，实现新的用户需求。但是在我认为，在我们有了大数据之后，我们应该去探索、预测用户的需求，一味被动等待用户有了需求在去实现就有点落后了。

### 第十七章 味道与启发

##### 1、注释

> - 不恰当的信息：注释只应当描述有关代码和设计的技术性信息
> - 废弃的注释：应当即使删除掉或者更新
> - 冗余的注释
> - 糟糕的注释：写注释应当和写代码一样，要思考一下
> - 注释掉的代码：应当及时删除

##### 2、环境

> - 需要多少步才能实现构建：应当使用单个命令签出系统，并用单个指令构建，系统的构建不应当是分小步或者是繁琐的。
> - 需要多少步才能做到的测试：单元测试应当可以在一个指令下全部运行。

##### 3、函数

> - 过多的参数：一个函数的参数应当少于3个，多余三个时应当被封装成为一个对象；
> - 输出参数：输出单数违反直觉，可以直接改变对象的状态
> - 表示参数：函数中的标识参数过多说明函数做了不止一件事
> - 死函数：没有被调用的函数应当删除掉

##### 4、一般性问题

> - 一个源文件存在多种语言：一个源文件的语言种类应当尽可能的少，降低文件的复杂性
> - 明显的行为未被实现：函数的实现应当按照其描述或名字定义所形容的实现
> - 不正确的边界行为：边界行为要靠编辑测试去发现不应当靠直觉
> - 忽视安全：警告也有可能造成程序运行的错误，对于安全机制和警告应当去处理而不是视而不见
> - 重复：代码中又重复说明代码还有可以优化和抽象的地方
> - 在错误的抽象层级上的代码：抽象类和派生类的界限需要根据设计划分清楚
> - 基类依赖于派生类：
> - 信息过多：
> - 死代码：删除系统中存在的死代码
> - 垂直分割：变量函数的定义和位置，应当遵循前面章节所描述的
> - 前后不一致：同类型的变量或方法取名定义时在系统中应当是一致的
> - 混淆视听：没有实现的构造器、没有用到的变量、没有调用的函数、没有信息量的注释；这些都应当被疑除掉。
> - 人为耦合：声明函数、变量和常量应当有统一的地方，而不是信手拈来的位置
> - 选择算子参数：
> - 晦涩的意图：代码要尽可能有表达力
> - 位置错误的权责：
> - 不恰当的静态方法：一般情况下尽量使用非静态函数，除非该函数没必要使用多态
> - 使用解释性变量：
> - 函数名称应该表达其行为：
> - 理解算法;
> - 用多态代替if\else和switch\case
> - 遵循标准约定：
> - 用命名变量代替魔术数：
> - 准确：消除代码的不确定性
> - 结构基于约定：
> - 封装条件：通常if和while语句内的判断条件如果过多都是可以封装成为一个函数的
> - 避免否定性条件：肯定是条件要比否定式条件好理解
> - 函数只该做一件事：
> - 掩蔽时序耦合：当调用函数的执行是有顺序的时候，可以通过调用显示执行
> - 别随意
> - 封装边界条件：编辑处理的代码应当集中在一处，不应散落在代码中
> - 函数应该只在一个抽象层级上
> - 在较高层级放置可配置数据
> - 避免传递浏览

##### 6、Java

> - 通过使用通配符避免过长的导入清单
> - 不要继承变量
> - 常量和枚举

##### 7、名称

> - 采用描述性名称
> - 名称应与抽象层级相符
> - 尽可能使用标准命名法
> - 无歧义的名称
> - 为较大作用范围选用较长的名字
> - 避免编码
> - 函数名称应当与函数功能相符，不应当有副作用

##### 8、测试

> - 测试不足：测试的覆盖率没有达到100%，就是不足
> - 使用测试覆盖率的工具
> - 别略过小测试
> - 被忽略的测试就是对不确定事物的疑问
> - 边界条件的测试
> - 全面测试相近的缺陷
> - 测试失败的模式有启发性
> - 测试覆盖率的模式有启发性
> - 测试应该快速

<div style="text-align:center;margin-top:50px;margin-bottom:50px;">
    <img src="https://note.youdao.com/yws/api/personal/file/C2C6FCFDC10942B6A3532E6F0928E455?method=download&shareKey=c554dacfc5193c29d4b35682aa1226d9" />
</div>
